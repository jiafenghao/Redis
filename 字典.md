# 字典
### 字典的实现
Redis的字典使用哈希表作为底层的实现，一个哈希表里面可以有多个哈希表节点，而每个哈希表节点就保存了字典中的一个键值对。  
接下来分别介绍Redis的哈希表、哈希表节点以及字典的实现。

###### 哈希表
```
typedef struct dictht{
  dictEntry **table;
  unsigned long size;
  unsigned long sizemask;
  unsigned long used;
}dictht;
```
table属性是一个数组，数组中的每一个元素都是一个指向dict.h/dictEntry结构的指针，每个dictEntry结构保存着一个键值对。size属性记录了哈希表的大小，也即是table数组的大小，而used属性则记录了哈希
表目前已有节点(键值对)的数量。sizemask属性的值总是等于size-1，这个属性和哈希值一起决定一个键应该被放到table数组的哪个索引上面。

###### 哈希表节点
哈希表节点使用dictEntry结构表示，每个dictEntry结构保存着一个键值对:
```
typedef struct dictEntry{
  void *key;
  union{
    void *val;
    uint64_tu64;
    int64_ts64;
  }v;
  struct dictEntry *next;
}dictEntry;
```
key属性保存着键值对中的键，而v属性保存值键值对中的值，其中键值对中的值可以是一个指针，或者是一个uint64_t整数，又或者是一个int64_t整数。
next属性是指向另一个哈希表节点的指针，这个指针可以将多个哈希值相同的键值对连接在一起，以此来解决冲突的问题。
